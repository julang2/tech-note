# 相关命令

- 显示连接信息：`SHOW PROCESSLIST;`
- 查询连接超时：`show global variables like 'wait_timeout';`
- 设置连接超时：`set global wait_timeout=3600;`
- 查询缓存配置：`show global variables like 'query_cache_type';`

- 查询数据库事务隔离级别：`show variables like 'transaction_isolation';`
- 查找持续时间超过60s的事务：`select * from information_schema.innodb_trx where TIME_TO_SEC(timediff(now(),trx_started))>60;`
- 查询每次事务的`redo log`是否直接持久化到磁盘的信息，1表示直接持久化到磁盘：`show variables like 'innodb_flush_log_at_trx_commit';`
- 查询每次事务的`binlog`是否直接持久化到磁盘的信息，1表示直接持久化到磁盘：`show variables like 'sync_binlog';`

- 查询死锁超时时间：`show variables like 'innodb_lock_wait_timeout';`
- 查询死锁检测设置：`show variables like 'innodb_deadlock_detect';`

- 查询`change buffer`占`buffer pool`的比例：`show variables like 'innodb_change_buffer_max_size';`

- select加读锁（S锁、共享锁）
```
    select k from t where id=1 lock in share mode;
```
- select加写锁（X锁，排他锁）
```    
    select k from t where id=1 for update;
```